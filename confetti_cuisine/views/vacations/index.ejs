<h2 class="center">Culinary Vacations Package Table </h2>

<% if (loggedIn) { %>
  <div class="center">
    <a class="button" href="/vacations/new">Create New Culinary Vacation Package</a>
  </div>
<%} else {%>
  <a class="button" data-toggle="modal" data-target="#myLoginModal">Create New Culinary Vacation Package</a>
  <div id="myLoginModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-body">
        Please login to create/edit/delete Vacations.
      </div>
      <div class="modal-footer">
        <button type="button" class="button" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
<%}%>
<table class="table">
  <thead>
  <tr>
    <th>Title</th>
    <th>Description</th>
      <% if (loggedIn) { %>
    <th>Edit</th>
    <th>Delete</th>
      <%}%>
  </tr>
  </thead>
  <tbody>
  <% vacations.forEach(vacation => { %>
  <tr>
    <td>
      <a href="<%= `/vacations/${vacation._id}` %>">
          <%= vacation.title %>
      </a>
    </td>
    <td>
        <%= vacation.description %>
    </td>
      <% if (loggedIn) { %>
    <td>
      <a href="<%=`vacations/${vacation._id}/edit`%>">
        Edit
      </a>
    </td>
    <td>
      <a href="<%= `vacations/${vacation._id}/delete?_method=DELETE` %>" onclick="return confirm('Are you sure you want to delete this record?')" a>Delete</a>
    </td>
      <%} else {%>
    <td>
      <a data-toggle="modal" data-target="#myLoginModal">
        Edit
      </a>
    </td>

    <td>
      <a data-toggle="modal" data-target="#myLoginModal">Delete</a>
    </td>

    <div id="myLoginModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-body">
          Please login to create/edit/delete Vacations.
        </div>
        <div class="modal-footer">
          <button type="button" class="button" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
      <%}%>
  </tr>
  <% }); %>
  </tbody>
</table>
